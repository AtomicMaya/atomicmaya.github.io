<!DOCTYPE html><html lang="en-US"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="og:url" content="https://atomicmaya.me/post/2022/2022_05_04+Building-a-raspi-private-web-server">
  <meta name="og:locale" content="en_us">
  <meta name="og:site_name" content="https://atomicmaya.me">
  <meta name="og:title" content="Building a Raspberry Pi private web server! | AtomicMaya's Blog">
  <meta name="og:description" content="Going behind the scenes on developping a private web service deployed on a Raspberry Pi.">
  <meta name="og:image" content="https://atomicmaya.me/assets/images/cover.jpg">
  <meta name="description" content="Going behind the scenes on developping a private web service deployed on a Raspberry Pi.">
  <meta name="keywords" content="atomicnicos, atomicmaya, osint, infosec, security, cybersec, cybersecurity, raspberry PI, web server, Docker, Ubuntu">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:url" content="https://atomicmaya.me/post/2022/2022_05_04+Building-a-raspi-private-web-server">
  <meta name="twitter:image" content="https://atomicmaya.me/assets/images/cover.jpg">
  <meta name="twitter:label1" content="Written By">
  <meta name="twitter:data1" content="Maya Boeckh">
  <meta name="twitter:site" content="@AtomicMaya">
  <meta name="twitter:creator" content="@AtomicMaya">
  <meta name="twitter:image:width" content="1280">
  <meta name="twitter:image:height" content="720">
  <style ng-transition="atomicmaya-me">.sidebar[_ngcontent-sc74]{position:relative;float:left;width:30%;padding:0 10px;overflow-y:visible}</style><style ng-transition="atomicmaya-me">footer[_ngcontent-sc18]{border-top:1px dashed #b5e853}</style><style ng-transition="atomicmaya-me">.text-decoration-underline[_ngcontent-sc71]{text-decoration:underline}</style><style ng-transition="atomicmaya-me">div[_ngcontent-sc72] > a[_ngcontent-sc72] > span[_ngcontent-sc72]{margin:.25rem;padding:.5rem;background-color:#2e2e2e;border-radius:.25rem;font-size:smaller}div[_ngcontent-sc72] > a[_ngcontent-sc72]{margin:.5rem 0}</style><style ng-transition="atomicmaya-me">img[_ngcontent-sc36]{width:50%}</style><style ng-transition="atomicmaya-me">p[_ngcontent-sc20]{font-size:smaller;color:#aaa}</style><style ng-transition="atomicmaya-me">p[_ngcontent-sc21]{font-size:smaller;color:#aaa;display:flex;margin-bottom:0;flex-wrap:wrap;padding:0;align-items:center}span[_ngcontent-sc21]{margin:.1rem .2rem;padding:.5rem;border-radius:.5rem;background-color:#484848}</style></head><body><a rel="me" style="display: none" href="https://tech.lgbt/@AtomicMaya">Mastodon</a>
  <title>Building a Raspberry Pi private web server! | AtomicMaya's Blog</title>
  <base href="/">
  <link rel="icon" type="image/x-icon" href="favicon.png">
  <script data-goatcounter="https://atomicmaya.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>
  <script src="https://kit.fontawesome.com/88cfc0e7e2.js" integrity="sha384-sX7kjQzLM8MFrzb6uyCnPsr+HRySaCE3/aRRrej3bbJ3kjm5GXmGWM1oYePcm1BW" crossorigin="anonymous"></script>
  <!-- Github Pages hack to allow SPA refresh without receiving 404. -->
  <script>
    window.prerenderReady = false;
    (function () {
      // Retrieve the URL the user was trying to access when receiving the 404.
      var redirect = sessionStorage.redirect;
      // Remove the URL from sessionStorage.
      delete sessionStorage.redirect;
      // Check if we actually need to redirect.
      if (redirect && redirect != location.href) {
        // We need to redirect to the URL the user was trying to access.
        history.replaceState(null, null, redirect);
      }
    })();
  </script>
  <!-- /Github Pages hack. -->
<link rel="stylesheet" href="styles.b420e920c9dbafeb.css">

  <app-root ng-version="14.2.1"><div class="h-100 w-100 d-flex flex-column justify-content-between"><app-header class="align-self-stretch"><header class="mb-3"><div class="container"><a id="a-title" href="/"><h1 class="ms-2">atomicmayaâ€‹@1337m4ch1n3</h1></a><h2>AtomicMaya's Blog at the end of the universe.</h2><nav><ul class="nav-lists d-flex flex-row flex-wrap"><li class="paths align-middle my-auto justify-content-center">Paths:</li><li class="nav-elements"><a href="/whoami">~$ whoami</a></li><li class="nav-elements"><a href="/posts">~$ ls -la ./posts</a></li></ul></nav></div></header></app-header><app-main-body class="align-self-stretch align-items-stretch mb-auto" _nghost-sc74=""><div _ngcontent-sc74="" class="container main-page"><div _ngcontent-sc74="" class="main-content"><router-outlet></router-outlet><app-raspi-tooling _nghost-sc36=""><app-post-body _ngcontent-sc36=""><h1>~$ Building a Raspberry Pi private web server!</h1><app-when _nghost-sc20=""><p _ngcontent-sc20="">Posted on May 4th, 2022. <!----></p></app-when><app-tag-viewer _nghost-sc21=""><p _ngcontent-sc21=""><strong _ngcontent-sc21="">Tags:</strong><span _ngcontent-sc21=""><a _ngcontent-sc21="" href="/tags/Development">Development</a></span><span _ngcontent-sc21=""><a _ngcontent-sc21="" href="/tags/CyberSec">CyberSec</a></span><span _ngcontent-sc21=""><a _ngcontent-sc21="" href="/tags/DevOps">DevOps</a></span><!----></p><!----><br _ngcontent-sc21=""></app-tag-viewer><div><p _ngcontent-sc36="">I was recently asked whether I could a family member out, as they needed a custom inventory management platform for pieces of a family art collection.</p><p _ngcontent-sc36="">I accepted, although I probably shouldn't have.</p><p _ngcontent-sc36="">I'll go over how the project services were designed, how it is being hosted, and more, in this blog post.</p><h4 _ngcontent-sc36="">Run-down</h4><ul _ngcontent-sc36=""><li _ngcontent-sc36=""><a _ngcontent-sc36="" routerlink="." fragment="the-service-architecture" class="no-underline" href="/post/2022/2022_05_04%2Bbuilding-a-raspi-private-web-server#the-service-architecture">The service architecture</a></li><li _ngcontent-sc36=""><a _ngcontent-sc36="" routerlink="." fragment="the-pi" class="no-underline" href="/post/2022/2022_05_04%2Bbuilding-a-raspi-private-web-server#the-pi">The Pi</a></li><li _ngcontent-sc36=""><a _ngcontent-sc36="" routerlink="." fragment="what-does-it-run" class="no-underline" href="/post/2022/2022_05_04%2Bbuilding-a-raspi-private-web-server#what-does-it-run">What does it run?</a></li></ul><hr _ngcontent-sc36=""><h4 _ngcontent-sc36="" id="the-service-architecture">The service architecture</h4><p _ngcontent-sc36="">The project follows a pretty simple design: the web frontend is how the user interacts with the service, the backend is how the service saves the data to a database.</p><p _ngcontent-sc36="">Due to my past experience, I decided to write the frontend in Angular, and the backend in Python, using FastAPI as the middleware. The database would use MySQL.</p><br _ngcontent-sc36=""><h4 _ngcontent-sc36="" id="the-pi">The Pi</h4><p _ngcontent-sc36="">For a myriad of reasons, we decided to use a local system, and decided to do so on a Raspberry Pi 4.</p><p _ngcontent-sc36="">The Pi has a number of advantages, but the one I retained was that one could have it boot off of an SSD, rather than the traditional SD card.</p><p _ngcontent-sc36="">Another neat thing is that there are a lot of case designs to 3D print, and I found a design that allows for an SSD, and additional ventilation fans.</p><p _ngcontent-sc36="">I got my model for the casing from <a _ngcontent-sc36="" target="_blank" href="https://www.thingiverse.com/thing:5270416/files" rel="noopener"><em _ngcontent-sc36="" class="fas fa-external-link-square-alt"></em> Thingiverse</a>, which I then printed at the <a _ngcontent-sc36="" target="_blank" href="https://faclab.ch" rel="noopener"><em _ngcontent-sc36="" class="fas fa-external-link-square-alt"></em> FacLab</a>, my universities' makerspace.</p><br _ngcontent-sc36=""><p _ngcontent-sc36="">The first element was to fit the SSD into the casing. In order to have it snug against the base, I flipped it from its original configuration.</p><div _ngcontent-sc36="" class="media-container"><img _ngcontent-sc36="" src="/assets/images/2022/220504-raspi-tooling/ssd.jpg" alt="The base casing with the SSD"><span _ngcontent-sc36=""><em _ngcontent-sc36="">The base casing with the SSD</em></span></div><p _ngcontent-sc36="">This meant that, in order to have the Pi itself fit snugly in the casing, a strut of sorts was needed. I designed it by using the RasPi design sheet.</p><div _ngcontent-sc36="" class="media-container"><img _ngcontent-sc36="" src="/assets/images/2022/220504-raspi-tooling/support.jpg" alt="The RaspberryPi strut"><span _ngcontent-sc36=""><em _ngcontent-sc36="">The RaspberryPi strut</em></span></div><p _ngcontent-sc36="">The Raspberry Pi then aligned perfectly with the holes in the casing, letting me start with the ventilation, which consists of a CPU heatsink/ventilator unit, and a casing 40mm ventilator.</p><div _ngcontent-sc36="" class="media-container"><img _ngcontent-sc36="" src="/assets/images/2022/220504-raspi-tooling/raspi-fitting.jpg" alt="The fitted RaspberryPi"><span _ngcontent-sc36=""><em _ngcontent-sc36="">The fitted RaspberryPi</em></span></div><div _ngcontent-sc36="" class="media-container"><img _ngcontent-sc36="" src="/assets/images/2022/220504-raspi-tooling/ventilation.jpg" alt="The RaspberryPi with the ventilation"><span _ngcontent-sc36=""><em _ngcontent-sc36="">The RaspberryPi with the ventilation</em></span></div><p _ngcontent-sc36="">The final device, bar some cables, looks like this:</p><div _ngcontent-sc36="" class="media-container"><img _ngcontent-sc36="" src="/assets/images/2022/220504-raspi-tooling/closed.jpg" alt="The completed RaspberryPi"><span _ngcontent-sc36=""><em _ngcontent-sc36="">The completed RaspberryPi</em></span></div><br _ngcontent-sc36=""><h4 _ngcontent-sc36="" id="what-does-it-run">What does it run?</h4><p _ngcontent-sc36="">From the get go I decided that I would use containerized applications, probably using Docker.</p><p _ngcontent-sc36="">This somewhat restricted my choice of platforms, so I went with a very lightweight and headless version of Ubuntu, which I flashed onto the SSD.</p><p _ngcontent-sc36="">I then installed containerd, docker and docker-compose for the management of our services, and went on to design a service architecture.</p><p _ngcontent-sc36="">I knew I would need a frontend (for the user to perform the relevant inventory actions), a backend (to handle said actions) and a database (to store the data).</p><p _ngcontent-sc36="">I also knew I did not want to use PHP, despite the fact that it would cut out the backend portion, because it isn't that great for modular code blocks, whereas Angular (when done right) is fantastic.</p><p _ngcontent-sc36="">The backend I decided could be done in FastAPI, mainly because it supports being run in a service-esque fashion via uvicorn, and I didn't need inordinate speed.</p><p _ngcontent-sc36="">As for the database, although I'd originally started by using a NoSQL database (MongoDB), I reverted to MySQL when I realized that searching specific fields could be made quicker with indexed data.</p><p _ngcontent-sc36="">This led the final services architecture to look something like this:</p><div _ngcontent-sc36="" class="media-container"><img _ngcontent-sc36="" src="/assets/images/2022/220504-raspi-tooling/design-raspi-service.drawio.png" alt="The services architecture"><span _ngcontent-sc36=""><em _ngcontent-sc36="">The services architecture</em></span></div><p _ngcontent-sc36="">After all of this was setup, I configured a few services such as a backup system, which exports the database to the device and uploads it to a server I control, and a firewall, which disallows anyone not connected locally on the network from accessing the services, whether web or SSH.</p><p _ngcontent-sc36="">Finally, I setup a cron job to allow the device to restart the various containers on reboot, which gives my relatives the ability to move it and work on it wherever they are, without the hassle of "needing an engineer". I can also SSH into it to apply an update when I see them (or remote into their computer to do it), which helps!</p></div></app-post-body></app-raspi-tooling><!----><div _ngcontent-sc74=""><span _ngcontent-sc74=""></span><br _ngcontent-sc74=""></div></div><div _ngcontent-sc74="" class="sidebar"><app-sidebar _ngcontent-sc74=""><app-socials><h4>~$ Find me here</h4><div class="center d-flex flex-row justify-content-center flex-wrap"><div class="mx-2"><a target="_blank" href="https://twitter.com/AtomicMaya_" rel="noopener"><em class="fab fa-twitter-square fa-2x"></em></a></div>â€‹ <div class="mx-2"><a target="_blank" href="https://linkedin.com/in/m-boeckh" rel="noopener"><em class="fab fa-linkedin fa-2x"></em></a></div>â€‹ <div class="mx-2"><a target="_blank" href="https://github.com/AtomicMaya" rel="noopener"><em class="fab fa-github-square fa-2x"></em></a></div>â€‹ <div class="mx-2"><a target="_blank" href="https://gitlab.unige.ch/Maya.Boeckh" rel="noopener"><em class="fab fa-gitlab fa-2x"></em></a></div>â€‹ <div class="mx-2"><a target="_blank" href="https://keybase.io/atomicmaya" rel="noopener"><em class="fas fa-key fa-2x"></em></a></div>â€‹ <div class="mx-2"><a target="_blank" href="https://tech.lgbt/@AtomicMaya" rel="noopener"><em class="fab fa-mastodon fa-2x"></em></a></div>â€‹
</div></app-socials><div class="separator my-4"></div><app-latest _nghost-sc71=""><h4 _ngcontent-sc71="">~$ Latest Posts</h4><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">30/08/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_08_30+heading-for-DEFCON">I spoke at DEFCON30! (I also attended it!)</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">29/07/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_07_29+heading-to-Amsterdam-and-going-to-MCH">Going back to Amsterdam and attending MCH!</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">15/05/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_05_15+winning-the-wavegame">Going to Paris for the Wavegame cloud competition!</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">04/05/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_05_04+building-a-raspi-private-web-server">Building a Raspberry Pi private web server!</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">26/04/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_04_26+running-the-digital-overdose-conference-again">Digital Overdose Conference 2: We're doing this again!</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">18/02/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_02_18+starting-a-new-job">I started a new job!</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">30/01/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_01_30+knight-ctf-2022-reverse-writeups">Dissecting the KnightCTF Reverse Engineering challenges!</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">30/01/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_01_30+knight-ctf-2022-programming-writeups">Dissecting the KnightCTF Programming challenges!</a></p></div><div _ngcontent-sc71="" class="my-2"><p _ngcontent-sc71="" class="m-0"><span _ngcontent-sc71="" class="text-decoration-underline">30/01/2022:</span><br _ngcontent-sc71=""><a _ngcontent-sc71="" class="no-underline" href="post/2022/2022_01_30+knight-ctf-2022-misc-writeups">Dissecting the KnightCTF Misc challenges!</a></p></div><!----></app-latest><div class="separator my-4"></div><app-list-tag-count _nghost-sc72=""><h4 _ngcontent-sc72="">~$ Tags</h4><div _ngcontent-sc72="" class="d-flex flex-wrap"><a _ngcontent-sc72="" class="no-underline" href="/tags/Conference"><span _ngcontent-sc72="">Conference (10)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Volunteering"><span _ngcontent-sc72="">Volunteering (5)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Talks"><span _ngcontent-sc72="">Talks (7)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/InfoSec"><span _ngcontent-sc72="">InfoSec (19)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Cloud"><span _ngcontent-sc72="">Cloud (1)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/DevOps"><span _ngcontent-sc72="">DevOps (2)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Development"><span _ngcontent-sc72="">Development (5)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/CyberSec"><span _ngcontent-sc72="">CyberSec (3)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Community"><span _ngcontent-sc72="">Community (8)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Professional"><span _ngcontent-sc72="">Professional (1)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Programming"><span _ngcontent-sc72="">Programming (3)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/CTF"><span _ngcontent-sc72="">CTF (14)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Write-Up"><span _ngcontent-sc72="">Write-Up (11)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Cryptography"><span _ngcontent-sc72="">Cryptography (2)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Personal"><span _ngcontent-sc72="">Personal (8)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/OSINT"><span _ngcontent-sc72="">OSINT (4)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/AppSec"><span _ngcontent-sc72="">AppSec (1)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Web"><span _ngcontent-sc72="">Web (3)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/Privacy"><span _ngcontent-sc72="">Privacy (3)</span></a><a _ngcontent-sc72="" class="no-underline" href="/tags/IOT"><span _ngcontent-sc72="">IOT (4)</span></a><!----></div></app-list-tag-count></app-sidebar></div></div></app-main-body><app-footer class="align-items-end" _nghost-sc18=""><footer _ngcontent-sc18="" class="py-4 mt-3 footer"><div _ngcontent-sc18="" class="container center"><a _ngcontent-sc18="" routerlink="/copyright" href="/copyright">Copyright CC-BY-SA</a> AtomicMaya 2020-2023<br _ngcontent-sc18=""> (<a _ngcontent-sc18="" routerlink="/privacy-policy" href="/privacy-policy">Privacy Policy</a>) </div></footer></app-footer></div></app-root>
<script src="runtime.a812681171856eee.js" type="module"></script><script src="polyfills.8a84757b170b8fe4.js" type="module"></script><script src="scripts.322bf2bede7b2054.js" defer=""></script><script src="main.9aecc5c43fe07560.js" type="module"></script>


</body><!-- This page was prerendered with Angular Universal --></html>